!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("lodash"),require("rxjs")):"function"==typeof define&&define.amd?define(["lodash","rxjs"],r):"object"==typeof exports?exports.sirr=r(require("lodash"),require("rxjs")):t.sirr=r(t.lodash,t.rxjs)}(window,function(t,r){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=2)}([function(r,e){r.exports=t},function(t,e){t.exports=r},function(t,r,e){"use strict";e.r(r);var n=e(1);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function i(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function s(t){return"function"==typeof t}var u=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;u=t},get useDeprecatedSynchronousErrorHandling(){return u}};function f(t){setTimeout(function(){throw t})}var a={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;f(t)},complete:function(){}},p=Array.isArray||function(t){return t&&"number"==typeof t.length};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return null!=t&&"object"===l(t)}var b,y={e:{}};function d(){try{return b.apply(this,arguments)}catch(t){return y.e=t,y}}function _(t){return b=t,d}function v(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,r){return r+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}v.prototype=Object.create(Error.prototype);var S=v;function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,r=!1;if(!this.closed){var e=this._parent,n=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,c=n?n.length:0;e;)e.remove(this),e=++u<c&&n[u]||null;if(s(o))_(o).call(this)===y&&(r=!0,t=t||(y.e instanceof S?g(y.e.errors):[y.e]));if(p(i))for(u=-1,c=i.length;++u<c;){var f=i[u];if(h(f))if(_(f.unsubscribe).call(f)===y){r=!0,t=t||[];var a=y.e;a instanceof S?t=t.concat(g(a.errors)):t.push(a)}}if(r)throw new S(t)}},t.prototype.add=function(r){if(!r||r===t.EMPTY)return t.EMPTY;if(r===this)return this;var e=r;switch(m(r)){case"function":e=new t(r);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.prototype._addParent=function(t){var r=this._parent,e=this._parents;r&&r!==t?e?-1===e.indexOf(t)&&e.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function g(t){return t.reduce(function(t,r){return t.concat(r instanceof S?r.errors:r)},[])}var x="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber";function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var j=function(t){function r(r,e,n){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,o._parentSubscription=null,arguments.length){case 0:o.destination=a;break;case 1:if(!r){o.destination=a;break}if("object"===E(r)){if(function(t){return t instanceof j||"_addParentTeardownLogic"in t&&t[x]}(r)){var i=r[x]();o.syncErrorThrowable=i.syncErrorThrowable,o.destination=i,i._addParentTeardownLogic(o)}else o.syncErrorThrowable=!0,o.destination=new O(o,r);break}default:o.syncErrorThrowable=!0,o.destination=new O(o,r,e,n)}return o}return i(r,t),r.prototype[x]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},r.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parent,r=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=r,this._parentSubscription=null,this},r}(w),O=function(t){function r(r,e,n,o){var i,u=t.call(this)||this;u._parentSubscriber=r;var c=u;return s(e)?i=e:e&&(i=e.next,n=e.error,o=e.complete,e!==a&&(s((c=Object.create(e)).unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=i,u._error=n,u._complete=o,u}return i(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=c.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):f(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;f(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;f(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(f(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(j);var T=function(){function t(t,r){this.bufferSize=t,this.startBufferEvery=r,this.subscriberClass=r&&t!==r?z:P}return t.prototype.call=function(t,r){return r.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),P=function(t){function r(r,e){var n=t.call(this,r)||this;return n.bufferSize=e,n.buffer=[],n}return i(r,t),r.prototype._next=function(t){var r=this.buffer;r.push(t),r.length==this.bufferSize&&(this.destination.next(r),this.buffer=[])},r.prototype._complete=function(){var r=this.buffer;r.length>0&&this.destination.next(r),t.prototype._complete.call(this)},r}(j),z=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.bufferSize=e,o.startBufferEvery=n,o.buffers=[],o.count=0,o}return i(r,t),r.prototype._next=function(t){var r=this.bufferSize,e=this.startBufferEvery,n=this.buffers,o=this.count;this.count++,o%e==0&&n.push([]);for(var i=n.length;i--;){var s=n[i];s.push(t),s.length===r&&(n.splice(i,1),this.destination.next(s))}},r.prototype._complete=function(){for(var r=this.buffers,e=this.destination;r.length>0;){var n=r.shift();n.length>0&&e.next(n)}t.prototype._complete.call(this)},r}(j),D=e(0),k=e.n(D);function H(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.d(r,"default",function(){return B}),e.d(r,"__useDefault",function(){return M});var B=function(){function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.levels={},r||(r={}),this.config=k.a.defaultsDeep(r,{buffer:{size:10,every:1},replayBuffer:{size:20},pathSeparator:"."})}return function(t,r,e){r&&H(t.prototype,r),e&&H(t,e)}(t,[{key:"initLevel",value:function(t,r){t["*"]||(t["*"]={subject:new n.ReplaySubject(this.config.replayBuffer.size)}),t[r]||(t[r]={subject:new n.ReplaySubject(this.config.replayBuffer.size)})}},{key:"publish",value:function(t){var r=this,e=k.a.split(t.target,this.config.pathSeparator),n=this.levels;k.a.each(e,function(e){r.initLevel(n,e),n[e].subject.next(t),n["*"].subject.next(t),n=n[e]})}},{key:"subscribe",value:function(t,r,e){var n=this,o=k.a.split(t,this.config.pathSeparator),i=this.levels,s=k.a.reduce(o,function(t,r){return n.initLevel(t,r),r?t[r]:t},i);if(s)return e?(void 0===e.size&&(e.size=this.config.buffer.size),void 0===e.every&&(e.every=this.config.buffer.every),s.subject.pipe(function(t,r){return void 0===r&&(r=null),function(e){return e.lift(new T(t,r))}}(e.size,e.every)).subscribe(r)):s.subject.subscribe(r)}}]),t}(),M=!0}])});